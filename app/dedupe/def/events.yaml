id: https://example.org/dedupe/events
name: dedupe-events-schema
title: Dedupe Domain Events Data Model
description: >-
  LinkML schema for domain events that capture immutable facts about
  what has happened in the system.

prefixes:
  linkml: https://w3id.org/linkml/
  dedupe: https://example.org/dedupe/

default_prefix: dedupe
default_range: string

imports:
  - linkml:types
  - ../../../pkg/dizzy/src/dizzy/def/events
  - models

classes:

  TestMessage:
    description: >-
      Simple test event with a single message string
    is_a: DomainEvent
    attributes:
      message:
        description: The test message content
        required: true
        range: string

  HardDriveDetected:
    description: >-
      Event recording that a hard drive was detected
    is_a: DomainEvent
    attributes:
      hard_drive:
        description: The detected hard drive
        required: true
        range: HardDrive

  PartitionDetected:
    description: >-
      Event recording that a partition was detected
    is_a: DomainEvent
    attributes:
      partition:
        description: The detected partition
        required: true
        range: Partition

  FileItemScanned:
    description: >-
      Event recording that a file item was scanned
    is_a: DomainEvent
    attributes:
      partition_uuid:
        description: UUID of the partition containing this file
        required: true
        range: string
      path:
        description: Full path to the file within the partition
        required: true
        range: string
      size:
        description: Size of the file in bytes
        required: true
        range: integer
      content_hash:
        description: Hash of the file contents
        required: true
        range: string
      cas_id:
        description: CAS identity (version + hash) of the stored content
        required: true
        range: string

  PartitionMountAssigned:
    description: >-
      Event recording that a partition has been assigned to a mount point,
      representing the desired state. This does not guarantee the partition
      is actually mounted - reconciliation is needed for that.
    is_a: DomainEvent
    attributes:
      partition:
        description: The partition assigned to be mounted
        required: true
        range: Partition
      mount_point:
        description: The desired mount point path
        required: true
        range: string
